"use strict";let cardsList=document.querySelector(".js_cardsList");const ulFavorites=document.querySelector(".js_cardfav"),inputSearch=document.querySelector(".js_inputSearch"),btnSearch=document.querySelector(".btnSearch"),btnReset=document.querySelector(".js_btnReset"),urlApi="https://dev.adalab.es/api/disney?pageSize=15";let cardsListApi=[],cardsFavoriteApi=[];const localStorageFav=JSON.parse(localStorage.getItem("favDisney"));function favLStorage(){localStorageFav&&(cardsFavoriteApi=localStorageFav,renderFavoriteList())}function renderCardsList(e){cardsList.innerHTML="";for(const t of e)cardsList.innerHTML+=renderCard(t);addEventCard()}function addEventCard(){const e=document.querySelectorAll(".js_licards");for(const t of e)t.addEventListener("click",handleClick)}function renderCard(e){if(!e||!e._id)return"";return`<li id="${e._id}" class="licards js_licards">\n    <img class="imgCard" src="${e.imageUrl||"https://via.placeholder.com/210x295/ffffff/555555/?text=Disney"}" alt="Disney Characters">\n    <h3 class="titleName">${e.name}</h3>\n    <button class="btnRemoveFav js_btnRemoveFav">Delete</button>\n  </li>`}function handleRemoveFav(e){const t=parseInt(e.currentTarget.parentElement.id),r=cardsFavoriteApi.findIndex(e=>e._id===t);-1!==r&&(cardsFavoriteApi.splice(r,1),localStorage.setItem("favDisney",JSON.stringify(cardsFavoriteApi)),renderFavoriteList())}function addEventCardFav(){const e=document.querySelectorAll(".js_btnRemoveFav");for(const t of e)t.addEventListener("click",handleRemoveFav)}function handleClick(e){const t=parseInt(e.currentTarget.id),r=cardsListApi.find(e=>e._id===t),a=cardsFavoriteApi.findIndex(e=>e._id===t);-1===a?(cardsFavoriteApi.push(r),localStorage.setItem("favDisney",JSON.stringify(cardsFavoriteApi))):cardsFavoriteApi.splice(a,1),renderFavoriteList()}function renderFavoriteList(){ulFavorites.innerHTML="";for(const e of cardsFavoriteApi)ulFavorites.innerHTML+=renderCard(e);addEventCardFav()}fetch(urlApi).then(e=>e.json()).then(e=>{cardsListApi=e.data,renderCardsList(cardsListApi),favLStorage()});const handleReset=e=>{e.preventDefault(),cardsFavoriteApi=[],localStorage.clear(),renderFavoriteList()};btnReset.addEventListener("click",handleReset);const handleSearch=e=>{e.preventDefault();const t=inputSearch.value;renderCardsList(cardsListApi.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())))};btnSearch.addEventListener("click",handleSearch);